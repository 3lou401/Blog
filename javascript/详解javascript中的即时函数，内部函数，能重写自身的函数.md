在上篇谈到匿名函数和回调函数的基础上，我们接着介绍javascript中的即时函数，内部函数，返回函数的函数，能重写自身的函数等几种常见的函数类型及使用方法。只需要大致了解匿名函数的概念，应该就能看懂这些内容

# 即时函数
首先，我们介绍第一个较为简单常用的即时函数
我们看到下面这一串代码
```
(function () {
  alert('boo');
}
) ();
```
粗看一下，这段代码似乎很奇怪，其实仔细分析不难发现这就是定义了一个匿名函数，并且立即就调用执行了这个匿名函数。第一对括号中的是匿名函数的定义，随后紧跟的一对括号是对匿名函数的调用。
下面这个例子在调用的时候，传入了参数，更好的说明了即时函数的用法。
```
(function (name) {
  alert('hello ' + name + '!')
}) ('liu chi')
```
即时函数的使用形式一般有两种：
第一种就是刚刚介绍的（定义function）（）后面的（）就是调用的。
第二种就是（function  （调用））
两种方法都是一样的，看自己的习惯选取适合自己的使用即时函数的方法。

使用即时函数有什么好处呢？
显然我们可以看到使用即时函数调用完之后，所有的东西都没了销毁了，全是一次性的，不会产生任何的全局变量占用空间等等。
但也有一个缺点就是即时函数是无法重复执行的，这好像就失去了函数重复调用的意义。
所以，一般来说即时函数通常用来执行一次性的操作或者异类初始化的任务。

# 内部函数
从上一篇文章中，我们显然知道，在javascript中，函数与其他类型的值在本质上是一样的，函数本身也是一种值。所以，我们自然就可以在一个函数内部定义另外一个函数，这样的函数就叫做内部函数。
看下面这段代码：
```
function outer(param) {
  function inner(theinput) {
    return theinput * 2;
  }
  return 'the result is ' + inner(param);
}
```
我们再outer函数内部定义了一个内部函数inner，并在里面调用inner函数。
```
outer(2);
inner(3);

```
上面这段代码的执行结果：
```
"the result is 4"

ReferenceError: inner is not defined

...on inner(theinput) { return theinput * 2; } return 'the result is ' + in...
```
我们知道内部函数只能在定义它的函数内部调用它，不能再外部调用它。所以有时候也叫它私有函数。

使用私有函数有什么好处呢？
* 有助于我们确保全局名字的纯净性，这样命名冲突的机会就很少
* 确保私有性，这使得我们可以选择只将一些必要的函数暴露给外部世界，而保留属于自己的函数，使他们不畏该应用程序的其他部分所用。

# 返回函数的函数
正如之前所提到的那样，函数始终有一个返回值，即便不是显示的返回值么，它也会隐式的返回一个undefined，所以既然函数能返回一个唯一值，那么自然函数也能够返回一个函数。函数跟其他类型的值在本质上是一样的。所以就出现了返回函数的函数。
看下面这段代码
```
function a() {
  alert('a!');
  return function () {
    alert('b!')
  }
}
```
上面这段代码，在函数a中的返回了一个匿名函数。
我们调用这个函数
```
a();
a()();

```
直接调用a会返回a中返回的函数
a()();的意思是调用a，在调用a的返回的函数。所以最后会弹出a和b。

# 能重写自己的函数
我们可以在一个函数的内部重定义该函数。有两种方法，一是将函数的返回值赋予函数本身,同样是前面那个例子
```
a = a();
```
只要执行上面一句代码，显然a酒杯重新定义为他自己的返回函数了。
还有一种方法就是直接在函数内部重写自己
```
function a() {
  alert('a!');
  a = function() {
    alert('b!');
  }
}
```
上面的代码，当我们第一次调用该函数是会有如下的情况发生。
* alert（‘a’）将会被执行（可以视为一次性的准备操作）。
* 全局变量a将会被重定义，并被赋予新的函数。
而如果该函数在被调用的话，被执行的九江市alert（b）了。

# 小结
下面我们根据一个综合的例子，将上面的几种函数综合到一起
```
var a = (function () {
  function somesetup() {
    var setup = 'done';
  }
  function actualwork() {
    alert('worky-worky');
  }
  somesetup();
  return actualwork;
}());
```
* 我们使用了即时函数，a在定义的时候立即调用了。
* 我们使用了私有函数，somesetup和actualwork两个函数都是私有函数
* 我们使用了了返回函数的函数
* 当该函数第一次调用时，它会调用somesetup并返回函数变量actualwork的应用。请注意，返回值中是不带括号的，因此该结果仅仅是一个函数的引用，并不会产生函数的调用。
* 由于这里执行语句是以var  a = 开头的所以我们这里也使用了能重写自己的函数
